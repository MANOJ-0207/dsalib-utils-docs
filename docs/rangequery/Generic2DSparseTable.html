<!DOCTYPE html>
<html lang="en" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Generic2DSparseTable - Docs</title>
    <link rel="stylesheet" href="../../../styles/docs.css" />
    <link
      rel="icon"
      type="image/x-icon"
      href="../assets/dependency-favicon.png"
    />
  </head>
  <body>
    <!-- Theme Toggle Button -->
    <div
      class="theme-toggle"
      onclick="toggleTheme()"
      title="Toggle Theme"
      id="theme-toggle"
    >
      <img id="icon-sun" src="../../../assets/sun.png" />
      <img id="icon-moon" src="../../../assets/moon.png" />
    </div>

    <div class="doc-container">
      <header>
        <h1>Generic2DSparseTable</h1>
        <p class="class-type">
          Type: <span class="tag class-tag">Concrete Class</span>
        </p>
      </header>

      <!-- Overview -->
      <section class="doc-section">
        <h2>Description</h2>
        <p>
          <code>Generic2DSparseTable&lt;T&gt;</code> is a generic 2D sparse
          table implementation for fast range queries over static 2D matrices
          using idempotent and overlap-safe binary operations.
        </p>
        <p>
          It is ideal for performing queries like <code>min</code>,
          <code>max</code>, and <code>gcd</code> on submatrices, with
          <b>O(1)</b> query time and
          <b>O(n × m × log n × log m)</b> preprocessing time.
        </p>
        <p>
          Internally, it uses a precomputed 4D table for aggregation, and does
          not support updates after construction.
        </p>
      </section>

      <!-- Use Cases -->
      <section class="doc-section">
        <h2>Use Cases</h2>
        <ul>
          <li>2D range minimum or maximum queries</li>
          <li>2D GCD queries</li>
          <li>Competitive programming or static grid analysis</li>
        </ul>
      </section>

      <!-- Method Summary -->
      <section class="doc-section">
        <h2>Method Summary</h2>
        <table class="doc-table">
          <thead>
            <tr>
              <th>Return Type</th>
              <th>Method</th>
              <th>Description</th>
              <th>Time Complexity</th>
            </tr>
          </thead>
          <tbody>
            <!-- Constructors -->
            <tr>
              <td><code>N/A</code></td>
              <td>
                <code
                  >Generic2DSparseTable(T[][] input, BinaryOperator&lt;T&gt;
                  operation)</code
                >
              </td>
              <td>Primary constructor using 2D array input</td>
              <td><b>O(n × m × log n × log m)</b></td>
            </tr>
            <tr>
              <td><code>N/A</code></td>
              <td>
                <code
                  >Generic2DSparseTable(List&lt;List&lt;T&gt;&gt; input,
                  BinaryOperator&lt;T&gt; operation)</code
                >
              </td>
              <td>Alternate constructor using 2D List input</td>
              <td><b>O(n × m × log n × log m)</b></td>
            </tr>

            <!-- Method -->
            <tr>
              <td><code>T</code></td>
              <td><code>query(int x1, int y1, int x2, int y2)</code></td>
              <td>
                Returns the result of applying the operation on the submatrix
                from <code>(x1, y1)</code> to <code>(x2, y2)</code>
              </td>
              <td><b>O(1)</b></td>
            </tr>
          </tbody>
        </table>
      </section>

      <section class="doc-section">
        <h2>Algorithm Details</h2>
        <p>
          The <code>Generic2DSparseTable</code> supports fast range queries over
          static 2D grids using idempotent and overlap-safe operations like
          <code>min</code>, <code>max</code>, or <code>gcd</code>. It leverages
          precomputation of results across all power-of-two sized rectangles for
          O(1) query time.
        </p>

        <p><strong>Key Concepts:</strong></p>
        <ul>
          <li>
            4D preprocessing: stores answers for every possible submatrix of
            size 2<sup>k</sup> × 2<sup>l</sup>
          </li>
          <li>
            Query on any arbitrary rectangle is answered using the four
            overlapping submatrices that fully cover it
          </li>
          <li>
            Only supports <i>static</i> data (immutable after construction)
          </li>
        </ul>

        <p><strong>Operations Supported:</strong></p>
        <ul>
          <li>
            <code>query(x1, y1, x2, y2)</code>: returns result over submatrix
            [(x1, y1), (x2, y2)]
          </li>
          <li>
            <code>new Generic2DSparseTable(matrix, operation)</code>: builds
            from 2D array or list using the provided operation
          </li>
        </ul>

        <p><strong>Time Complexity:</strong></p>
        <ul>
          <li><code>Construction</code>: O(n × m × log n × log m)</li>
          <li><code>Query</code>: O(1)</li>
        </ul>

        <p><strong>Space Complexity:</strong> O(n × m × log n × log m)</p>
        <ul>
          <li>
            Each cell precomputes log(n) × log(m) results across different
            submatrix sizes
          </li>
          <li>
            Fast lookup is made possible by this aggressive precomputation
          </li>
        </ul>

        <p>This structure is best suited for:</p>
        <ul>
          <li>Static 2D data with frequent range queries</li>
          <li>
            Idempotent and overlap-safe operations like <code>min</code>,
            <code>max</code>, <code>gcd</code>
          </li>
          <li>
            Grids where updates are not needed, but fast queries are critical
            (e.g., image processing, terrain maps)
          </li>
        </ul>
      </section>

      <!-- Example Usage -->
      <section class="doc-section">
        <h2>Usage Example</h2>
        <pre class="code-block"><code>
Integer[][] matrix = {
    {1, 3, 2},
    {5, 4, 6},
    {8, 7, 9}
};

Generic2DSparseTable&lt;Integer&gt; table = new Generic2DSparseTable&lt;&gt;(
    matrix,
    Integer::min
);

// Query minimum in submatrix from (0,0) to (2,1)
System.out.println(table.query(0, 0, 2, 1)); // Output: 1
        </code></pre>
      </section>
    </div>
    <footer>© 2025 Java Generic DSA Utils | Manoj Kumar G</footer>
    <script src="../../../scripts/docs.js"></script>
  </body>
</html>
